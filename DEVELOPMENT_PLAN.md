# 商机跟进及业绩统计系统 - 开发与维护计划

## 1. 项目初衷
本项目旨在建立一个集商机管理、项目跟进、业绩统计及 AI 分析于一体的综合业务管理系统。通过数字化的手段，提高销售团队的协作效率，实现商机全生命周期的精准追踪，并利用 AI 技术辅助分析商机潜力和风险，为决策提供数据支持。

## 2. 核心目标
- **商机全生命周期管理**: 从创建、跟进到成交/流失的全过程记录。
- **项目管理集成**: 实现商机向项目的无缝转化，管理项目任务（卡片）及进度。
- **自动化业绩统计**: 实时汇总部门及个人业绩，对比目标完成情况。
- **AI 赋能**: 利用大语言模型（DeepSeek/Ollama）自动解析商机、生成日报摘要及提供决策建议。
- **容器化部署**: 使用 Docker 实现环境一致性，降低运维成本。

## 3. 当前进展 (截至 2026-01-04)

### 已修复的核心问题
- **容器环境网络联通性**: 修复了 Docker 网络下的服务发现问题（`app-network`），确保前端能够正常访问后端 API。
- **商机管理列表获取失败**: 
    - 修复了后端 `OpportunityViewSet` 的过滤字段错误。
    - 完善了 `OpportunitySerializer`，增加了客户名称、阶段显示等关键字段。
    - 修复了前端 `OpportunityList.vue` 的响应结构处理逻辑，增加了对分页和非分页数据的兼容。
- **数据自动关联**:
    - 在后端增加了 `perform_create` 钩子，实现了商机、日报、审批申请、通知等模块的创建者/申请人自动填充。
    - 优化了序列化器的名称显示逻辑，将 "Unknown" 统一改为更友好的 "系统" 或 "未分配"。
- **发布与部署**:
    - 完成了代码脱敏并同步至 GitHub 私有仓库（`aokest/16group`）。
    - 编写并完善了阿里云/生产环境部署手册 [DEPLOYMENT_GUIDE.md](file:///Users/aoke/code%20test/商机跟进及业绩统计/16lily/docs/DEPLOYMENT_GUIDE.md)。

### 当前状态
- 数据库服务已正常启动，本地研发/测试环境稳定。
- GitHub 仓库已更新为干净的“最新稳定版”。
- 生产环境部署方案已准备就绪。

## 4. 下一步计划
- [ ] **生产环境上线**: 按照部署手册完成阿里云 ECS 上的环境搭建与上线。
- [ ] **性能优化**: 针对项目看板和商机列表增加更细粒度的懒加载。
- [ ] **AI 功能深度集成**: 验证并完善 AI 自动解析商机内容的准确性。
- [ ] **权限细化**: 进一步测试不同角色（销售、经理、管理员）的权限边界。
- [ ] **报表系统**: 开发专门的业绩统计报表页面，支持导出 Excel/PDF。

## 5. 维护者指南
- **后端**: Django REST Framework
- **前端**: Vue 3 + Vite + Element Plus
- **环境**: Docker Compose (包含 `web`, `dashboard`, `db` 服务)
- **API 调试**: 登录后可通过 `/api/` 路径访问 DRF 自动生成的 API 文档。
