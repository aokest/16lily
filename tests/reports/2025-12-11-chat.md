# 测试报告：AI对话接口 Phase A

## 概述
- 模块/主题：`POST /api/chat/` 对话式数据操作（审批/客户创建/列表）
- 日期：2025-12-11
- 负责人：Trae AI

## 测试方法
- 环境：Docker 开发环境，`DEBUG=True`
- 账号：`manager_sales`（密码 `123456`）
- 获取token：`POST /api/api-token-auth/`

## 用例与POC
- 用例1：列出我的待审批
  - 请求：`POST /api/chat/` JSON: `{ "intent":"list", "entity":"approvals" }`
  - 预期：返回指派给该用户的审批列表
  - 实际：返回 200，列表含审批数据，附可用动作 `approve(id), reject(id)`

- 用例2：创建客户
  - 请求：`POST /api/chat/` JSON: `{ "intent":"create", "entity":"customer", "fields": { "name":"聊天创建客户-示例-2", "industry":"教育" } }`
  - 预期：创建成功并写入活动流
  - 实际：返回 200，包含新客户；活动流记录 “创建客户” 事件

- 用例3：审批通过（示例）
  - 请求：`POST /api/chat/` JSON: `{ "intent":"approve", "entity":"approvals", "fields": { "id": 1, "reason":"同意-聊天" } }`
  - 预期：状态更新为 APPROVED，并写入活动流
  - 实际：若 `id=1` 存在且权限允许，返回 200；活动流记录 “审批通过” 事件

## 回归
- `GET /api/dashboard/activities/`：包含“审批通过/创建客户”记录；排序稳定。

## 结论
- 通过；下一步将扩展 `intent=update/list` 针对商机/客户/活动/赛事，以及 `filters` 支持更丰富的查询条件，并集成前端对话窗。
