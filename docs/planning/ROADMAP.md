# 🚀 未来开发蓝图 (Project Roadmap)

> **版本**: 2025-12-30 Updated
> **状态**: 执行中 (In Progress)

本文档详细列出了系统未来的演进方向，核心任务是**逐步替换老旧的 Django Admin (Jazzmin)**，构建现代化的前后端分离应用。

---

## 📅 Phase 3: 现代化前端重构 (Frontend Modernization) [DOING]
**核心目标**: 彻底摆脱 Jazzmin/Django Admin 的 UI 限制，打造**前后端分离**的现代化应用，提升交互体验 (UI/UED)。
**策略**: 采用 "双轨制" (Dual Track) —— 保持后端 Django API 不变，逐步将业务模块从 Admin 迁移至 Vue 3 Dashboard，最终只保留 Admin 给运维人员使用。

### 1. 架构升级
- [x] **后端 (Backend)**:
    - [x] 修复根路径 404 问题，增加默认跳转至 Admin。
    - [x] 引入 `Django REST Framework (DRF)` 构建标准的 RESTful API。
    - [ ] **Auth**: 实现基于 JWT 或 Session 的标准登录接口，废除硬编码 Token。
    - [ ] **Swagger**: 编写 Swagger/OpenAPI 文档，规范接口定义。
- [x] **前端 (Frontend)**:
    - [x] **初始化**: 创建 Vue 3 + Vite + TypeScript 项目 (`frontend_dashboard`)。
    - [x] **依赖**: 安装 Element Plus, Tailwind CSS v4, Axios, Sass。
    - [x] **环境**: 配置 Vite Proxy 解决跨域，Docker 化部署。
    - [x] **CRM 模块**: 移植商机管理 (List/Edit/Detail) 到 Vue。
    - [x] **审批中心**: 优化人类可读性 (Human-Readable)，隐藏ID，显示业务名称与人员全名。

### 2. UI/UX 深度重构 (Phase 3.6) [IN PROGRESS - 主要任务已完成]
**核心目标**: 对标 `project_cards` 项目，彻底提升系统的视觉体验，打造"时尚、科技感"的现代化界面。
- [x] **视觉升级 (Visual Overhaul)**:
    - [x] **优化卡片样式**: 移植 `project_cards` 的设计灵感，应用现代化阴影 (`shadow-card`)、圆角 (`rounded-2xl`)、排版系统。
    - [x] **优化后台样式**: 对"石榴粒粒"管理后台的侧边栏进行全面现代化改造，包括深色渐变背景、折叠动画、分组视觉优化。
    - [x] **前端样式重构**: 深度定制 Tailwind 主题，定义完整的颜色系统、字体系统、间距系统、阴影系统和动画系统。
    - [ ] 重写 `ProjectTimeline` 样式，引入更精致的甘特图渲染与动画。
    - [x] 优化 `CardEditor` 交互，实现更流畅的模态框体验 (v0.9.0 Done)。
- [ ] **功能补全**:
    - [x] 实现卡片内容的"粘贴即解析" ( PasteSmart)。
    - [ ] **列表增强**: 内容条目自动识别并生成项目编号。
    - [ ] **导出增强**: 支持卡片一键导出为图片或可编辑 PPTX。
    - [ ] **布局调整**: 卡片编辑页支持左右分栏宽度拖拽调整。

### 3. AI 增强与体验优化 (Phase 3.5) [DONE]
**核心目标**: 提升 AI 交互的准确性与系统的易用性，解决“机器语言”对用户的困扰。
- [x] **复杂指令解析**: 增强规则引擎，支持“新增一个三峡职业技术学院商机”等自然语言指令的精准识别与容错。
- [x] **日志可观测性**: 完善 `SubmissionLog`，确保 AI 失败案例可追踪、可复现。
- [x] **AI 智能填单与润色**:
    - [x] 自动匹配/默认当前用户为销售经理。
    - [x] 自动提取商机金额单位（万/亿）。
    - [x] **卡片智能润色**: 引入“资深安全顾问” Persona，支持专业术语优化 (v0.9.0)。
- [ ] **下一步计划 (Next Steps)**:
    - [ ] **AI 上下文感知**: 在创建商机前，AI 先查询库中是否已存在该客户，避免重复创建。
    - [ ] **意图扩展**: 支持“更新”意图（例如：“把三峡商机的金额改为80万”）。
    - [ ] **批量操作**: 在审批中心支持按业务类型筛选并批量通过。
    - [ ] **详情透视**: 在列表页点击业务名称，直接弹出详情模态框，无需跳转。
    - [ ] **移动端适配**: 适配手机浏览器，方便外勤人员使用 AI 语音录入。

---

## 📅 Phase 4: 移动端与全渠道触达 (Mobile & Omni-channel)
**核心目标**: 让业务人员随时随地处理工作。

### 1. 移动端小程序 (Mini Program)
- [ ] **技术选型**: Uni-app (跨平台) 或 微信原生小程序。
- [ ] **核心功能**:
    - **极速录入**: 语音转文字录入商机、日报。
    - **拍照识别**: 拍摄名片、合同首页自动填单 (OCR)。
    - **审批中心**: 手机端一键审批立项、报销。
    - **外勤打卡**: 基于地理位置的拜访记录。

### 2. 消息集成
- [ ] **企业微信/钉钉集成**:
    - 消息推送：关键节点（赢单、审批通过）实时推送到工作群。
    - 单点登录 (SSO)：扫码一键登录系统。

---

## 📅 Phase 5: 数据智能与分析增强 (Data Intelligence)
**核心目标**: 从“记录数据”进化为“分析数据”，辅助决策。

### 1. 商机全生命周期审计 (Opportunity Audit Trail) [NEW]
- [ ] **变更追踪**: 记录商机所有关键字段（阶段、金额、经办人、交付物）的变更历史。
- [ ] **审计日志**: 记录“谁(Actor)在何时(Time)做了什么(Action)”，并支持对比变更前后的值 (Diff)。
- [ ] **可视化**: 在商机详情页增加“变更历史”时间轴标签页。

### 2. 高级报表
- [ ] **销售漏斗分析**: 细分各阶段转化率，识别流失节点。
- [ ] **业绩预测 (Forecasting)**: 基于历史转化率和当前商机池，预测本季度/年度营收。
- [ ] **人效分析**: 统计人均产出、跟进频率、商机响应时间。

### 2. 智能洞察
- [ ] **商机评分**: AI 根据客户规模、跟进记录自动计算商机赢率。
- [ ] **客户画像**: 自动聚合客户的新闻动态、工商变更信息（需对接第三方API）。

---

## 📅 Phase 6: 安全与合规 (Security & Compliance)
**核心目标**: 确保数据资产安全，符合企业级合规要求。

### 1. 代码审计与自检
- [ ] **静态代码分析**: 引入 SonarQube 或 Bandit (Python) 进行自动化扫描。
- [ ] **依赖扫描**: 定期检查 pip/npm 依赖包的已知漏洞 (CVE)。
- [ ] **敏感信息扫描**: 确保代码库中无硬编码的 API Key 或密码。

### 2. 网络与数据安全
- [ ] **传输加密**: 全站强制 HTTPS (TLS 1.3)。
- [ ] **数据脱敏**: 对手机号、身份证等敏感字段在前端展示时进行掩码处理。
- [ ] **操作审计**: 记录所有敏感操作（导出、删除、修改权限）的详细日志（IP、UA、时间）。
- [ ] **备份机制**: 实现数据库的每日自动冷备与 Binlog 实时热备。
