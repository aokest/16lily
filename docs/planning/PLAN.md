# 遗留功能与后续规划 (Gap Analysis & Roadmap)

本文档对比了原后台（Admin）与新工作台（Dashboard）的功能差异，并规划了后续开发计划。

## 1. 功能差异分析 (Gap Analysis)

| 功能模块 | 原后台 (Django Admin) | 新工作台 (Dashboard) | 现状说明 |
| :--- | :--- | :--- | :--- |
| **系统设置** | ✅ 完整支持 | ❌ 无 | 目前无法配置 AI 模型、管理用户权限。 |
| **用户管理** | ✅ 用户/组/权限 | ❌ 无 | 只能查看个人信息，无法新增用户或重置密码。 |
| **组织架构** | ✅ 部门/层级 | ❌ 无 | 缺乏直观的部门树展示与人员归属管理。 |
| **日志审计** | ✅ 提交日志/操作日志 | ⚠️ 仅提交日志 | 缺少全局操作审计（Activity Log）的可视化。 |
| **客户图谱** | ❌ 无 (仅文字关联) | ❌ 无 | 客户与联系人、上下级公司的关系尚无图表展示。 |
| **个人中心** | ✅ 修改密码/资料 | ⚠️ 仅只读 | 用户无法修改自己的头像、密码或偏好设置。 |
| **消息通知** | ❌ 仅邮件(未配置) | ❌ 无 | 缺乏站内信、审批通过通知、待办提醒。 |
| **我的待办** | ❌ 无 | ⚠️ 仅审批待办 | 缺乏商机跟进提醒、任务截止提醒等通用待办。 |

---

## 2. 后续开发计划 (Roadmap)

### 📅 Phase 4.1: 系统基础管理 (System Foundation) ✅
**目标**: 让管理员脱离 Django Admin，直接在 Dashboard 完成基础运维。
- [x] **AI 配置中心**: 前端界面管理 `AIConfiguration` (API Key, Base URL, Model Name)。
- [x] **用户与组织**:
    - 用户列表与详情（新增/编辑/禁用）。
    - [ ] 部门树状结构管理（拖拽调整归属）。
- [x] **角色权限**: 简单的 RBAC 角色分配（管理员/销售经理/销售/游客）。

**✅ 已完成功能**:
- ✅ AI 配置管理界面 (`/settings/ai`)：支持增删改查、设为默认、测试连接
- ✅ 用户管理界面 (`/settings/users`)：支持用户 CRUD、部门职位分配、账户状态管理
- ✅ 后端 API：`/api/admin/users/` 和 `/api/ai/configs/` 端点已部署并验证
- ✅ 权限控制：仅管理员可访问系统设置功能
- ✅ Docker 环境修复：所有容器正常运行，前后端通信正常

### 📅 Phase 4.2: 个人效能中心 (Personal Efficiency)
**目标**: 增强每个用户的日常使用体验。
- [ ] **个人设置**: 修改头像、密码、界面语言/主题。
- [ ] **通知中心 (Inbox)**:
    - 站内信下拉列表。
    - 消息分类：审批通知、系统公告、任务提醒。
    - WebSocket 实时推送（可选）。
- [ ] **通用待办 (Todo)**:
    - 独立的待办管理页面。
    - 关联业务对象（如：需在周五前回访某客户）。

### 📅 Phase 4.3: 数据可视化增强 (Visual Intelligence)
**目标**: 提供深度的洞察能力。
- [ ] **客户关系图谱 (Relationship Graph)**:
    - 使用 ECharts 或 D3.js 绘制客户股权穿透图或联系人汇报关系树。
    - 支持节点点击跳转详情。
- [ ] **销售漏斗高级版**: 支持按部门、按时间段对比的漏斗分析。

---

## 3. 建议优先级

1.  **AI 配置中心**: 鉴于 AI 是核心功能，且目前配置依赖数据库操作，建议优先开发前端配置页。
2.  **个人设置**: 允许用户修改密码是基础安全需求。
3.  **通知中心**: 解决审批后无法及时知晓结果的痛点。
4.  **客户图谱**: 属于高级特性，可稍后安排。
