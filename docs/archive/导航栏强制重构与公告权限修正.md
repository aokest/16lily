抱歉，之前的导航栏重构可能因为 Jazzmin 配置的生效机制（缓存或配置格式）没有完全按照预期展示。我会重新调整 `jazzmin_settings.py`，这次使用更明确的 **`app_groups`** 和 **`custom_links`** 组合来强制分组。同时，我会完善公告的权限逻辑。

## 📅 修正计划

### **Phase 1: 导航栏强制分组 (Fix Sidebar)**
1.  **使用 `custom_links` 构造一级菜单**：
    *   Jazzmin 的默认行为是按 App 分组，我们要打破这个限制，需要使用 `custom_links` 创建虚拟的一级菜单（如“个人中心”、“商机管理”等），并将对应的 Model 挂载进去。
    *   或者，更简单且有效的方法是：**重命名 Model 的 `verbose_name`**，或者利用 `custom_links` 配合 `hide_models` 来手动构建菜单结构。
    *   **最佳方案**：修改 `jazzmin_settings.py`，利用 `"custom_links"` 定义主要的一级菜单，并在其中嵌入具体的 Model URL。同时隐藏默认的 App 显示。

    **目标结构**：
    *   **个人中心** (Personal Center)
        *   个人资料 (UserProfile)
        *   公告 (Announcement)
        *   待办任务 (TodoTask)
        *   业绩目标 (PerformanceTarget)
    *   **工作报告** (Work Reports)
        *   工作日报/周报 (WorkReport)
    *   **商机管理** (Opportunity Mgmt)
        *   商机列表 (Opportunity)
        *   商机跟进 (OpportunityLog)
    *   **市场活动管理** (Marketing)
        *   活动列表 (MarketActivity)
        *   媒体矩阵管理 (SocialMediaStats)
    *   **赛事管理** (Competition)
        *   赛事列表 (Competition)
    *   **客户关系管理** (CRM)
        *   客户组织 (Customer)
        *   客户联系人 (Contact)
    *   **认证和授权** (Auth)
        *   用户 (User)
        *   组 (Group)

### **Phase 2: 公告权限逻辑完善**
1.  **发布权限**：
    *   修改 `AnnouncementAdmin.save_model`：
        *   如果当前用户是超级管理员 (`is_superuser`) 或拥有 `change_announcement` 权限（视为审核员），且状态被设为 `APPROVED`，则允许直接发布。
        *   否则，强制将状态重置为 `DRAFT` 或 `PENDING`，并生成待办任务给管理员。
    *   **界面提示**：在 Admin 中给非管理员用户显示提示：“您的公告需要审核后才会发布”。

---

## 🚀 立即执行
1.  **重写 `jazzmin_settings.py`**：采用 `custom_links` 彻底重构侧边栏。
2.  **更新 `core/admin.py`**：增强 `AnnouncementAdmin` 的权限控制逻辑。